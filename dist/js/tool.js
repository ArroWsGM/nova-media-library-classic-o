!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=24)}([function(t,e){t.exports=function(t,e,n,r,a,o){var i,l=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(i=t,l=t.default);var c,u="function"==typeof l?l.options:l;if(e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),a&&(u._scopeId=a),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=c):r&&(c=r),c){var p=u.functional,d=p?u.render:u.beforeCreate;p?(u._injectStyles=c,u.render=function(t,e){return c.call(e),d(t,e)}):u.beforeCreate=d?[].concat(d,c):[c]}return{esModule:i,exports:l,options:u}}},,,function(t,e,n){var r=n(0)(n(4),n(21),!1,null,null,null);t.exports=r.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),a=n.n(r),o=n(8),i=n.n(o),l=n(11),s=n.n(l),c=n(14),u=n.n(c),p=n(16),d=n.n(p);function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){_(t,e,n[e])})}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=null,v=null;e.default={props:{types:{type:Array,default:[]},tool:{type:Boolean,default:!1},field:{type:String,default:"none"},listing:{default:!1}},components:{nmlAction:a.a,nmlSearch:i.a,nmlItems:s.a,nmlLoader:u.a,Popup:d.a},data:function(){return{config:window.Nova.config,bulk:{array:[],is:!1},items:{array:[],full:!1},filter:{description:null,type:this.types[0]||null,from:null,to:null,step:0},oldFilter:{},loading:!1,popup:null}},methods:{clearData:function(){this.items={array:[],full:!1},this.filter.step=0},get:function(){var t=this;this.items.full=!0,this.loading=!0,Nova.request().post("/nova-vendor/nova-media-library/get",this.filter).then(function(e){t.loading=!1,t.items.full=e.data.length<1,Array.isArray(e.data)&&(t.items.array=t.items.array.concat(e.data))}).catch(function(){t.loading=!1})},doSearch:function(){var t=this;JSON.stringify(this.filter)!==JSON.stringify(this.oldFilter)&&(this.oldFilter=f({},this.filter),clearTimeout(m),m=setTimeout(function(){t.clearData(),t.get()},1e3))},loader:function(){this.filter.step++,this.oldFilter.step++,this.get()},scroller:function(){if(!this.items.full&&!this.loading)try{window.innerHeight+window.scrollY>=document.body.offsetHeight&&this.loader()}catch(t){console.error(this.__("nml_bad_browser"))}},deleteFiles:function(t){var e=this;t.length&&confirm(this.__("nml_delete_selected"))&&(this.loading=!0,Nova.request().post("/nova-vendor/nova-media-library/delete",{ids:t}).then(function(t){e.popup=null,e.bulk.array=[],e.clearData(),e.get(),e.loading=!1}).catch(function(t){e.loading=!1,e.$toasted.show(t.response.data.message,{type:"error"})}))}},created:function(){"onwheel"in document&&(v="wheel"),"onmousewheel"in document&&(v="mousewheel"),this.oldFilter=f({},this.filter),this.get(),this.tool&&document.addEventListener(v,this.scroller)},beforeDestroy:function(){this.tool&&document.removeEventListener(v,this.scroller)}}},function(t,e,n){var r=n(0)(n(6),n(7),!1,null,null,null);t.exports=r.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{list:{},upload:{}}},methods:{clearUpload:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.upload={total:t,done:0}},selectFiles:function(t){t.target.files.length&&(this.$parent.loading=!0,this.clearUpload(t.target.files.length),this.list=Object.assign({},t.target.files),this.uploadFile(0),document.getElementById("nml_upload").value=null)},uploadFile:function(t){var e=this,n=this.list[t];if(!n)return this.uploadCheck();var r=new FormData;r.append("file",n),Nova.request().post("/nova-vendor/nova-media-library/upload",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(n){e.upload.done++,e.$toasted.show(e.upload.done+" / "+e.upload.total,{type:"info",duration:500}),e.uploadFile(t+1),n.data.message&&e.$toasted.show(n.data.message,{type:"success"})}).catch(function(n){e.uploadFile(t+1),n.response.data.message&&e.$toasted.show(n.response.data.message,{type:"error"})})},uploadCheck:function(){this.$parent.loading=!1,this.$toasted.show(this.__("nml_uploaded_files")+": "+this.upload.done+"/"+this.upload.total,{type:"success"}),this.$parent.clearData(),this.$parent.get()},changeBulk:function(){this.$parent.bulk.is&&(this.$parent.bulk.array=[]),this.$parent.bulk.is=!this.$parent.bulk.is},bulkAll:function(){var t=this;this.$parent.bulk.array.length===this.$parent.items.array.length?this.$parent.bulk.array=[]:(this.$parent.bulk.array=[],this.$parent.items.array.forEach(function(e){return t.$parent.bulk.array.push(e.id)}))},pushFiles:function(){for(var t=this.$parent.bulk.array,e=t.length,n=this.$parent.items.array,r=[],a=0;a<n.length&&!(t.includes(n[a].id)&&(r.push(n[a].url),--e<1));a++);Nova.$emit("nml-select-files",[this.$parent.field,r])}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex mb-6"},[t.$parent.tool||t.$parent.listing?n("checkbox-with-label",{staticClass:"mr-6",attrs:{checked:t.$parent.bulk.is},on:{change:t.changeBulk}},[t._v(t._s(t.__("nml_bulk_select")))]):t._e(),t._v(" "),t.$parent.bulk.is?n("button",{staticClass:"btn-default btn-primary cursor-pointer shadow-md mr-6",attrs:{type:"button"},on:{click:t.bulkAll}},[t._v(t._s(t.__("nml_select_all")))]):t._e(),t._v(" "),t.$parent.bulk.is&&t.$parent.bulk.array.length?n("button",{staticClass:"btn-default btn-danger cursor-pointer shadow-md",attrs:{type:"button"},on:{click:function(e){return t.$parent.deleteFiles(t.$parent.bulk.array)}}},[t._v(t._s(t.__("nml_delete_selected"))+" ("+t._s(t.$parent.bulk.array.length)+")")]):t._e(),t._v(" "),!t.$parent.tool&&t.$parent.bulk.is&&t.$parent.bulk.array.length?n("button",{staticClass:"btn-default text-white bg-success cursor-pointer shadow-md ml-6",attrs:{type:"button"},on:{click:t.pushFiles}},[t._v(t._s(t.__("nml_add_to_listing"))+" ("+t._s(t.$parent.bulk.array.length)+")")]):t._e(),t._v(" "),n("label",{staticClass:"btn btn-default btn-primary cursor-pointer shadow-md ml-auto"},[n("input",{staticClass:"form-file-input",attrs:{id:"nml_upload",accept:t.$parent.config.nml_accept,type:"file",multiple:""},on:{change:t.selectFiles}}),t._v("\n    "+t._s(t.__("nml_upload_files"))+"\n  ")])],1)},staticRenderFns:[]}},function(t,e,n){var r=n(0)(n(9),n(10),!1,null,null,null);t.exports=r.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{types:this.$parent.$props.types||[]}},methods:{updateDate:function(t,e){this.$parent.filter[e]=t||null,this.$parent.doSearch()}},created:function(){this.types.length&&(this.$parent.filter.type=this.types[0])}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex mb-6"},[n("div",{staticClass:"relative mr-4"},[n("icon",{staticClass:"absolute search-icon-center ml-3 text-70",attrs:{type:"search"}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.filter.description,expression:"$parent.filter.description"}],staticClass:"form-control form-input w-search pl-search shadow-md",attrs:{type:"search",placeholder:t.__("nml_search_by_description")},domProps:{value:t.$parent.filter.description},on:{input:[function(e){e.target.composing||t.$set(t.$parent.filter,"description",e.target.value)},function(e){return t.$parent.doSearch()}]}})],1),t._v(" "),n("date-time-picker",{staticClass:"form-control form-input shadow-md mr-4",attrs:{autocomplete:"off",placeholder:t.__("nml_upload_from"),dateFormat:"Y-m-d",firstDayOfWeek:1,"enable-time":!1},on:{change:function(e){return t.updateDate(e,"from")}}}),t._v(" "),n("date-time-picker",{staticClass:"form-control form-input shadow-md mr-4",attrs:{autocomplete:"off",placeholder:t.__("nml_upload_to"),dateFormat:"Y-m-d",firstDayOfWeek:1,"enable-time":!1},on:{change:function(e){return t.updateDate(e,"to")}}}),t._v(" "),t.$parent.config.nml_types.length>1?n("select",{directives:[{name:"model",rawName:"v-model",value:t.$parent.filter.type,expression:"$parent.filter.type"}],staticClass:"shadow-md block border-0 cursor-pointer form-control form-select ml-auto",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.$parent.filter,"type",e.target.multiple?n:n[0])},function(e){return t.$parent.doSearch()}]}},[t.types.length?t._e():n("option",{domProps:{value:null}},[t._v(t._s(t.__("nml_all_types")))]),t._v(" "),t._l(t.$parent.config.nml_types,function(e){return!t.types.length||t.types.indexOf(e)>-1?n("option",{key:e,domProps:{value:e}},[t._v("\n      "+t._s(e)+"\n    ")]):t._e()})],2):t._e()],1)},staticRenderFns:[]}},function(t,e,n){var r=n(0)(n(12),n(13),!1,null,null,null);t.exports=r.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={methods:{bg:function(t){return"image"===t.mime?{backgroundImage:"url(".concat(t.url,")")}:{}},mime:function(t){switch(t.mime){case"image":return"image";case"audio":return"audio";case"video":return"video";default:return"file"}},clickCard:function(t){if(this.$parent.bulk.is)this.$parent.bulk.array.includes(t.id)?this.$parent.bulk.array=this.$parent.bulk.array.filter(function(e){return e!==t.id}).slice():this.$parent.bulk.array.push(t.id);else{if(!this.$parent.tool)return void Nova.$emit("nml-select-file",[this.$parent.field,t.url]);this.$parent.popup=t}}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-wrap -mx-1 card-array"},[t.$parent.items.array.length?t._l(t.$parent.items.array,function(e){return n("div",{key:e.id,staticClass:"item px-1 mb-2 w-1/6 cursor-pointer"},[n("div",{staticClass:"card shadow-md",class:"nml-icon-"+t.mime(e),style:t.bg(e),attrs:{title:e.description},on:{click:function(n){return t.clickCard(e)}}},[t.$parent.bulk.is?n("checkbox",{attrs:{checked:t.$parent.bulk.array.includes(e.id)}}):t._e()],1)])}):n("div",{staticClass:"w-full text-center p-4"},[t._v("\n    "+t._s(t.$parent.loading?t.__("nml_loading"):t.__("nml_no_files_found"))+"\n  ")])],2)},staticRenderFns:[]}},function(t,e,n){var r=n(0)(null,n(15),!1,null,null,null);t.exports=r.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.$parent.loading||t.$parent.items.full?t._e():[n("button",{staticClass:"form-file-btn btn-default btn-primary cursor-pointer mt-8 m-auto block shadow-md",attrs:{type:"button"},on:{click:t.$parent.loader}},[t._v(t._s(t.$parent.tool?t.__("nml_no_autoload"):t.__("nml_load_more")))]),t._v(" "),t.$parent.tool?n("div",{staticClass:"help-text help-text pb-4 mt-2 m-auto block text-center"},[t._v("\n      "+t._s(t.__("nml_scroll_automatically"))+"\n    ")]):t._e()],t._v(" "),t.$parent.loading?n("div",{staticClass:"fixed pin z-30 bg-white-50%"},[n("loading-view")],1):t._e()],2)},staticRenderFns:[]}},function(t,e,n){var r=n(0)(n(17),n(20),!1,null,null,null);t.exports=r.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18);n.n(r);e.default={directives:{copy:r.copy},methods:{error:function(){this.$toasted.show(this.__("nml_unknown_error"),{type:"error"})},update:function(){var t=this;this.$parent.loading=!0,Nova.request().post("/nova-vendor/nova-media-library/update",{id:this.$parent.popup.id,description:this.$parent.popup.description}).then(function(){t.$toasted.show(t.__("nml_successfully_updated"),{type:"success"}),t.$parent.loading=!1,t.$parent.popup=null}).catch(function(){t.$parent.loading=!1,t.error()})},onCopy:function(){this.$toasted.show(this.__("nml_url_copied"),{type:"success"})}},created:function(){document.body.classList.add("overflow-hidden")},beforeDestroy:function(){document.body.classList.remove("overflow-hidden")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a=(r=n(19))&&"object"==typeof r&&"default"in r?r.default:r,o={bind:function(t,e){var n=e.value;if("callback"===e.arg)t.$copyCallback=n;else{t.$copyValue=n;var r=function(){a(t.$copyValue),t.$copyCallback&&t.$copyCallback(t.$copyValue)};t.addEventListener("click",r),t.$destroyCopy=function(){return t.removeEventListener("click",r)}}},unbind:function(t){t.$destroyCopy()},componentUpdated:function(t,e){var n=e.value;"callback"===e.arg?t.$copyCallback=n:t.$copyValue=n}},i=function(t){t.directive("copy",o)};"undefined"!=typeof window&&window.Vue&&i(window.Vue),e.copy=o,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.contain="strict",e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="12pt";var n=getSelection(),r=!1;n.rangeCount>0&&(r=n.getRangeAt(0)),document.body.appendChild(e),e.select(),e.selectionStart=0,e.selectionEnd=t.length;var a=!1;try{a=document.execCommand("copy")}catch(t){}return document.body.removeChild(e),r&&(n.removeAllRanges(),n.addRange(r)),a}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup fixed pin z-20 py-view bg-primary-70% overflow-y-auto"},[n("div",{staticClass:"absolute pin z-20",on:{click:function(e){t.$parent.popup=null}}}),t._v(" "),n("div",{staticClass:"relative z-30 bg-white p-8 rounded-lg shadow-lg m-auto"},[n("button",{staticClass:"close select-none",attrs:{type:"button"},on:{click:function(e){t.$parent.popup=null}}},[t._v("×")]),t._v(" "),n("div",{staticClass:"flex border-b border-40"},[n("div",{staticClass:"w-1/4 py-4 font-bold text-80"},[t._v(t._s(t.__("nml_id")))]),t._v(" "),n("div",{staticClass:"w-3/4 py-4"},[t._v(t._s(t.$parent.popup.id))])]),t._v(" "),n("div",{staticClass:"flex border-b border-40"},[n("div",{staticClass:"w-1/4 py-4 font-bold text-80"},[t._v(t._s(t.__("nml_created")))]),t._v(" "),n("div",{staticClass:"w-3/4 py-4"},[t._v(t._s(t.$parent.popup.created))])]),t._v(" "),n("div",{staticClass:"flex border-b border-40"},[n("div",{staticClass:"w-1/4 py-4 font-bold text-80"},[t._v(t._s(t.__("nml_type")))]),t._v(" "),n("div",{staticClass:"w-3/4 py-4"},[t._v(t._s(t.$parent.popup.type))])]),t._v(" "),n("div",{staticClass:"flex border-b border-40"},[n("div",{staticClass:"w-1/4 py-4 font-bold text-80"},[t._v(t._s(t.__("nml_size")))]),t._v(" "),n("div",{staticClass:"w-3/4 py-4"},[t._v(t._s(t.$parent.popup.size))])]),t._v(" "),n("div",{staticClass:"flex border-b border-40"},[n("div",{staticClass:"w-1/4 py-4 font-bold text-80 leading-loose"},[t._v(t._s(t.__("nml_description")))]),t._v(" "),n("div",{staticClass:"w-3/4 py-4"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.popup.description,expression:"$parent.popup.description"}],staticClass:"form-control form-input w-full shadow-md",domProps:{value:t.$parent.popup.description},on:{input:function(e){e.target.composing||t.$set(t.$parent.popup,"description",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"flex border-b border-40"},[n("div",{staticClass:"w-1/4 py-4 font-bold text-80"},[t._v(t._s(t.__("nml_url")))]),t._v(" "),n("div",{staticClass:"w-3/4 py-4"},[n("a",{staticClass:"text-primary font-bold no-underline",attrs:{href:t.$parent.popup.url,target:"_blank"}},[t._v(t._s(t.__("nml_open")))]),t._v(" "),n("button",{directives:[{name:"copy",rawName:"v-copy",value:t.$parent.popup.url,expression:"$parent.popup.url"},{name:"copy",rawName:"v-copy:callback",value:t.onCopy,expression:"onCopy",arg:"callback"}],staticClass:"text-80 font-bold no-underline float-right",attrs:{type:"button"}},[t._v(t._s(t.__("nml_copy")))])])]),t._v(" "),n("div",{staticClass:"flex mt-6"},[n("button",{staticClass:"btn-default btn-primary cursor-pointer mr-6 shadow-md",attrs:{type:"button"},on:{click:t.update}},[t._v("\n        "+t._s(t.__("nml_update"))+"\n      ")]),t._v(" "),n("button",{staticClass:"btn-default btn-danger cursor-pointer ml-auto shadow-md",attrs:{type:"button"},on:{click:function(e){return t.$parent.deleteFiles([t.$parent.popup.id])}}},[t._v("\n        "+t._s(t.__("nml_delete"))+"\n      ")])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"nml-tool"}},[n("heading",{staticClass:"mb-6"},[t._v(t._s(t.__("nml_media_library")))]),t._v(" "),n("nmlAction"),t._v(" "),n("nmlSearch"),t._v(" "),n("nmlItems"),t._v(" "),n("nmlLoader"),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.popup?n("Popup"):t._e()],1)],1)},staticRenderFns:[]}},,,function(t,e,n){n(25),n(29),t.exports=n(30)},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Nova.booting(function(t,e,r){e.addRoutes([{name:"media-library",path:"/media-library",component:n(26)}])}),"object"===r(Nova.config.nml_lang)&&Object.assign(Nova.config.translations,Nova.config.nml_lang)},function(t,e,n){var r=n(0)(n(27),n(28),!1,null,null,null);t.exports=r.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=n.n(r);e.default={components:{Library:a.a}}},function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("Library",{attrs:{tool:!0}})},staticRenderFns:[]}},function(t,e){},function(t,e){}]);